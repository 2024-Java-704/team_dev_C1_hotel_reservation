<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<script src="https://kit.fontawesome.com/d9fdad14ab.js" crossorigin="anonymous"></script>
	<link rel="stylesheet" type="text/css" href="/css/style.css">
	<meta charset="UTF-8">
	<title>å®¿è©³ç´°</title>
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">
	<link rel="stylesheet" type="text/css" href="/css/detailInn.css">
	<link rel="stylesheet" type="text/css" href="/css/reviewStar.css">
	<link rel="stylesheet" type="text/css" href="/css/rank.css">
</head>

<body>
	<header th:replace="header"></header>

	<h1 th:text="${inn.name}"></h1>
	<div class="position">
	<h1 class="fa-solid fa-location-dot fa-2xl" style="color: #ec785b;"></h1></i><h3 th:text="${inn.address}"></h3>
	</div>

	<ul class="slider">
		<li th:each="photo:${photos}">
			<img th:src="${photo.photoUrl}" alt="å®¿ã®å†™çœŸ">
		</li>
	</ul>

	<table border="1">
		<tr>
			<th>ãƒ—ãƒ©ãƒ³</th>
			<th>é‡‘é¡</th>
			<th></th>
		</tr>
		<tr th:each="plan:${plans}">
			<td th:text="${plan.name}"></td>
			<td th:text="${plan.price}+'å††'"></td>
			<td style="width: 50px;">
				<form th:action="'/book/'+${plan.id}" method="get">
					<input type="submit" class="book" style="width:100%; height:100%;" value="äºˆç´„ã¸é€²ã‚€">

				</form>
			</td>
		</tr>
	</table>

	<div class="rate-wrap">
		<span>è©•ä¾¡</span>
		<span class="rate" id="mainRate" style="--star-width: 0;"></span>
		<span id="mainRankValue" th:text="${#numbers.formatDecimal(rank, 0, 'COMMA', 1, 'POINT')} + 'ç‚¹'"></span>
	</div>

	<form th:action="'/review/add/'+${inn.id}" method="post">
		<table border="1">
			<tr>
				<br>
				<th>è©•ä¾¡</th>
				<td>
					<div class="rate-form">
						<input id="star5" type="radio" name="rankId" value="5">
						<label for="star5">â˜…</label>
						<input id="star4" type="radio" name="rankId" value="4">
						<label for="star4">â˜…</label>
						<input id="star3" type="radio" name="rankId" value="3" checked>
						<label for="star3">â˜…</label>
						<input id="star2" type="radio" name="rankId" value="2">
						<label for="star2">â˜…</label>
						<input id="star1" type="radio" name="rankId" value="1">
						<label for="star1">â˜…</label>
					</div>
				</td>
				<td><textarea name="content" placeholder="ãƒ¬ãƒ“ãƒ¥ãƒ¼è¨˜å…¥æ¬„"></textarea></td>
			</tr>
		</table>
		<br>
		<button>æŠ•ç¨¿</button>
	</form>

	<div onclick="changeDisplay()" class="button_line001">
	<a><p class="hoverPoint">ğŸ‘‡ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸€è¦§ã‚’è¦‹ã‚‹ğŸ‘‡</p></a>
	</div>
	<br>
	
<!--	å¾Œã§ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã«ç§»ã™-->
    <style>
        #displayChange {
            display: none; /* åˆæœŸè¡¨ç¤ºã‚’éè¡¨ç¤ºã«è¨­å®š */
        }
        .hoverPoint{
			cursor: pointer;
		}
    </style>
    
    
	<div id="displayChange">
	<table>
		<tr th:each="review:${reviews}">
			<td>
				<span th:text="${review.rankId + '.0'}"></span>
			</td>
			<td th:if="${review.content} != ''" th:text="${review.content}"></td>
			<td th:if="${review.content} == ''" th:text="ã‚³ãƒ¡ãƒ³ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“"></td>
		</tr>
	</table>
	</div>

	<script src="https://code.jquery.com/jquery-3.4.1.min.js"
		integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
	<!-- è‡ªä½œã®JS -->
	<script src="/js/detailInn.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			var mainRankText = document.getElementById('mainRankValue').innerText;
			var mainRank = parseFloat(mainRankText.replace('ç‚¹', ''));

			var mainStarWidth = mainRank * 30; // ãƒ¡ã‚¤ãƒ³è©•ä¾¡ã®æ˜Ÿã®å¹…

			document.getElementById('mainRate').style.setProperty('--star-width', mainStarWidth + 'px');


		});

		const changeDisplay = () => {
			var ele = document.getElementById('displayChange');

			if (ele.style.display == 'block') {
				ele.style.display = 'none';
			} else {
				ele.style.display = 'block';
			}
		};
	</script>

	<footer th:replace="footer"></footer>
</body>

</html>